var IKRS=IKRS||{CREATOR:"Ikaros Kappler",DATE:"2013-11-27"};IKRS.Object=function(){},IKRS.Object.inherit=function(){},IKRS.Object.prototype={constructor:IKRS.Object,toString:function(){return"[IKRS.Object]"}},IKRS.ArraySet=function(e,t){IKRS.Object.call(this),null==e&&(e=[]),null==t&&(t={equal:function(e,t){return e==t}}),this.elements=e,this.comparator=t},IKRS.ArraySet.prototype.add=function(e){this.elements.push(e)},IKRS.ArraySet.prototype.addUnique=function(e){for(var t in this.elements)if(this.comparator.equal(e,this.elements[t]))return!1;return this.elements.push(e),!0},IKRS.ArraySet.prototype.removeElementAt=function(e){delete this.elements[e]},IKRS.ArraySet.prototype.indexOf=function(e){for(var t in this.elements)if(this.comparator.equal(e,this.elements[t]))return t;return-1},IKRS.ArraySet.prototype.constructor=IKRS.ArraySet,IKRS.RegexAttribute=function(e){IKRS.Object.call(this),this.value=e},IKRS.RegexAttribute.prototype.isInteger=function(e){return IKRS.RegexToken.isInteger(this.value,e)},IKRS.RegexAttribute.prototype.isEmpty=function(){return""==this.value},IKRS.RegexAttribute.prototype.constructor=IKRS.RegexAttribute,IKRS.Pattern=function(e){IKRS.Object.call(this),this.name=e,this.children=[],this.value=null,this.attributes=[]},IKRS.Pattern.prototype.getName=function(){return this.name},IKRS.Pattern.prototype.getValue=function(){return this.value},IKRS.Pattern.prototype.getChildren=function(){return this.children},IKRS.Pattern.prototype.getAttributes=function(){return this.attributes},IKRS.Pattern.prototype.constructor=IKRS.Pattern,IKRS.PushbackStringReader=function(e,t,r){IKRS.Object.call(),void 0===t&&(t=0),void 0===r&&(r=e.length),this.stringData=e,this.startOffset=Math.max(0,t),this.maxReadLength=Math.min(r,e.length),this.position=-1,this.currentCharacter=-1,this.currentCharacterCode=-1,this.lineNumber=1,this.columnNumber=0,this._resetMark=null,this.mark()},IKRS.PushbackStringReader.prototype.reachedEOI=function(){return this.position>=this.maxReadLength},IKRS.PushbackStringReader.prototype.atBeginOfInput=function(){return-1==this.position},IKRS.PushbackStringReader.prototype.getPosition=function(){return this.position},IKRS.PushbackStringReader.prototype.getCurrentCharacter=function(){return this.currentCharacter},IKRS.PushbackStringReader.prototype.getCurrentCharacterCode=function(){return this.currentCharacterCode},IKRS.PushbackStringReader.prototype.getLineNumber=function(){return this.lineNumber},IKRS.PushbackStringReader.prototype.getColumnNumber=function(){return this.columnNumber},IKRS.PushbackStringReader.prototype.read=function(){return this.startOffset+this.position+1>=this.startOffset+this.maxReadLength?(this.currentCharacter=-1,this.currentCharacterCode=-1):(this.position++,this.currentCharacter=this.stringData.charAt(this.position),this.currentCharacterCode=this.stringData.charCodeAt(this.position),"\n"==this.currentCharacter||10==this.currentCharacterCode||13==this.currentCharacterCode?(this.lineNumber++,this.columnNumber=1):this.columnNumber++,this.currentCharacter)},IKRS.PushbackStringReader.prototype.unread=function(e){if(void 0!==e&&null!=e||(e=1),this.position-e+1<this.startOffset)return console.log("[IKRS.PushbackStringReader.unread("+e+")] Cannot unread "+e+" characters. Only "+this.position+" read so far."),!1;for(var t=!1;0<e;){var r=this.stringData.charAt(this.position),n=this.stringData.charCodeAt(this.position);"\n"==r||10==n||13==n?(this.lineNumber--,t=!0):this.columnNumber--,this.position--,e--}return t&&(this.columnNumber=this.detectCurrentLineLength()),this.position<0?(this.currentCharacter=-1,this.currentCharacterCode=-1):(this.currentCharacter=this.stringData.charAt(this.position),this.currentCharacterCode=this.stringData.charCodeAt(this.position)),!0},IKRS.PushbackStringReader.prototype.mark=function(){return this._resetMark=this.getMark(),this._resetMark},IKRS.PushbackStringReader.prototype.getMark=function(){return{position:this.position,currentCharacter:this.currentCharacter,currentCharacterCode:this.currentCharacterCode,lineNumber:this.lineNumber,columnNumber:this.columnNumber}},IKRS.PushbackStringReader.prototype.reset=function(){this.resetTo(this._resetMark)},IKRS.PushbackStringReader.prototype.resetTo=function(e){return!(e.position<-1||e.position>this.maxReadLength)&&(this.position=e.position,this.position<=-1||this.position>=this.maxReadLength?(this.currentCharacter=-1,this.currentCharacterCode=-1):(this.currentCharacter=this.stringData.charAt(this.startOffst+this.position),this.currentCharacterCode=this.stringData.charCodeAt(this.startOffst+this.position)),this.lineNumber=e.lineNumber,this.columnNumber=e.columnNumber,!0)},IKRS.PushbackStringReader.prototype.available=function(){return this.maxReadLength-this.position-1},IKRS.PushbackStringReader.prototype.extractFromString=function(e,t){return t.position-e.position<1?"":this.stringData.substring(e.position+1,t.position+1)},IKRS.PushbackStringReader.prototype._detectCurrentLineLength=function(){for(var e=this.position;this.stringData.charAt(e),this.stringData.charCodeAt(e),0<=--e&&!this._isLineBreak(character,characterCode););return this.position-e},IKRS.PushbackStringReader.prototype._isLineBreak=function(e,t){return"\n"==e||"\r"==e||10==t||13==t},IKRS.PushbackStringReader.prototype.toString=function(){var e=this.stringData.substr(0,32);return e.length<this.stringData.length&&(e+="[..."+(this.stringData.length()-e.length())+" more char(s)...]"),"[IKRS.PushbackStringReader]={ stringData="+e+", startOffset="+this.startOffset+", maxReadLength="+this.maxReadLength+", position="+this.position+", this.currentCharacter="+this.currentCharacter+" }"},IKRS.PushbackStringReader.prototype.constructor=IKRS.PushbackStringReader,IKRS.StringBuffer=function(e){Object.call(this),this.buffer=Array(),this.length=0,e&&this.append(e)},IKRS.StringBuffer.prototype.getLength=function(){return this.length},IKRS.StringBuffer.prototype.append=function(e){if(void 0===e)return this.append("undefined");var t=new String(e);this.buffer.push(e),this.length+=t.length},IKRS.StringBuffer.prototype.toString=function(){return this.buffer.join("")},IKRS.StringBuffer.prototype.constructor=IKRS.StringBuffer,IKRS.RegexToken=function(e,t,r,n,a,i,o){IKRS.Object.call(),this.value=e,this.rawValue=t,this.isOperator=r,this.isConstant=n,this.isEscaped=a,this.inputStartOffset=i,this.inputEndOffset=o},IKRS.RegexToken.KLEENESTERN="*",IKRS.RegexToken.KLEENENOTEMPTY="+",IKRS.RegexToken.OPENINGBRACKET="(",IKRS.RegexToken.CLOSINGBRACKET=")",IKRS.RegexToken.SETSTART="[",IKRS.RegexToken.SETEND="]",IKRS.RegexToken.RANGE="-",IKRS.RegexToken.INTERSECTION="&&",IKRS.RegexToken.UNION="|",IKRS.RegexToken.EXCEPT="^",IKRS.RegexToken.BEGIN_OF_INPUT="^",IKRS.RegexToken.END_OF_INPUT="$",IKRS.RegexToken.ANY_CHARACTER=".",IKRS.RegexToken.QUANTIFYING_START="{",IKRS.RegexToken.QUANTIFYING_END="}",IKRS.RegexToken.QUANTIFYING_QUESTIONMARK="?",IKRS.RegexToken.prototype.getCharacterCode=function(){return 0==this.value.length?-1:this.value.charCodeAt(0)},IKRS.RegexToken.prototype.isQuantifyingOperator=function(){return this.isOperator&&("*"==this.value||"+"==this.value||"{"==this.value||"}"==this.value||"?"==this.value)},IKRS.RegexToken.prototype.isSpecialCharacter=function(){return!this.isEscaped&&("."==this.value||"^"==this.value||"$"==this.value)||this.isEscaped&&("d"==this.value||"D"==this.value||"s"==this.value||"S"==this.value||"w"==this.value||"W"==this.value)},IKRS.RegexToken.prototype.isBeginOfInputCharacter=function(){return!this.isEscaped&&"^"==this.value},IKRS.RegexToken.prototype.isEndOfInputCharacter=function(){return!this.isEscaped&&"$"==this.value},IKRS.RegexToken.prototype.isWildcardCharacter=function(){return!this.isEscaped&&"."==this.value},IKRS.RegexToken.prototype.isDigitClassCharacter=function(){return this.isEscaped&&"d"==this.value},IKRS.RegexToken.prototype.isNonDigitClassCharacter=function(){return this.isEscaped&&"D"==this.value},IKRS.RegexToken.prototype.isWhitespaceClassCharacter=function(){return this.isEscaped&&"s"==this.value},IKRS.RegexToken.prototype.isNonWhitespaceClassCharacter=function(){return this.isEscaped&&"S"==this.value},IKRS.RegexToken.prototype.isWordClassCharacter=function(){return this.isEscaped&&"w"==this.value},IKRS.RegexToken.prototype.isNonWordClassCharacter=function(){return this.isEscaped&&"W"==this.value},IKRS.RegexToken.prototype.isUnionOperator=function(){return this.isOperator&&"|"==this.value},IKRS.RegexToken.prototype.isQuantifyingStartOperator=function(){return this.isOperator&&"{"==this.value},IKRS.RegexToken.prototype.isQuantifyingEndOperator=function(){return this.isOperator&&"}"==this.value},IKRS.RegexToken.prototype.isQuestionMarkOperator=function(){return this.isOperator&&"?"==this.value},IKRS.RegexToken.prototype.isSternOperator=function(){return this.isOperator&&"*"==this.value},IKRS.RegexToken.prototype.isPlusOperator=function(){return this.isOperator&&"+"==this.value},IKRS.RegexToken.prototype.isSetStartOperator=function(){return this.isOperator&&"["==this.value},IKRS.RegexToken.prototype.isSetEndOperator=function(){return this.isOperator&&"]"==this.value},IKRS.RegexToken.prototype.isClosingBracketOperator=function(){return this.isOperator&&")"==this.value},IKRS.RegexToken.prototype.isOpeningBracketOperator=function(){return this.isOperator&&"("==this.value},IKRS.RegexToken.prototype.isRangeOperator=function(){return this.isOperator&&"-"==this.value},IKRS.RegexToken.prototype.isAndOperator=function(){return this.isOperator&&"&&"==this.value},IKRS.RegexToken.prototype.isWhitespace=function(){return!this.isEscaped&&(" "==this.value||"\n"==this.value||"\t"==this.value||"\b"==this.value||"\f"==this.value)},IKRS.RegexToken.prototype.isExceptOperator=function(){return this.isOperator&&"^"==this.value},IKRS.RegexToken.isInteger=function(e,t){if(null==e||0==e.length)return!1;for(var r=0;r<e.length;r++){if(0==r&&"-"==e.charAt(r)&&!t)return!1;if((0!=r||"-"!=e.charAt(r))&&!IKRS.RegexToken.isDecimalDigitCharacter(e.charAt(r)))return!1}return!0},IKRS.RegexToken.isHexadecimal=function(e){for(var t=0;t<e.length;t++)if(!IKRS.RegexToken.isHexadecimalCharacter(e.charAt(t)))return!1;return!0},IKRS.RegexToken.isOctal=function(e){for(var t=0;t<e.length;t++)if(!IKRS.RegexToken.isOctalCharacter(e.charAt(t)))return!1;return!0},IKRS.RegexToken.prototype.toString=function(){return"[IKRS.RegexToken]={ value="+this.value+", rawValue="+this.rawValue+", isOperator="+this.isOperator+", isConstant="+this.isConstant+", isEscaped="+this.isEscaped+", inputStart="+this.inputStartOffset+", inputEnd="+this.inputEndOffset+" }"},IKRS.RegexToken.isDecimalDigitCharacter=function(e){return"0"==e||"1"==e||"2"==e||"3"==e||"4"==e||"5"==e||"6"==e||"7"==e||"8"==e||"9"==e},IKRS.RegexToken.isOctalDigitCharacter=function(e){return"0"==e||"1"==e||"2"==e||"3"==e||"4"==e||"5"==e||"6"==e||"7"==e},IKRS.RegexToken.isHexadecimalCharacter=function(e){return IKRS.RegexToken.isDecimalDigitCharacter(e)||"A"==e||"a"==e||"B"==e||"b"==e||"C"==e||"c"==e||"D"==e||"d"==e||"E"==e||"e"==e||"F"==e||"f"==e},IKRS.Object.prototype.contructor=IKRS.RegexToken,IKRS.RegexTokenizer=function(e){IKRS.Object.call(this),this.pushbackReader=e,this.currentToken=null,this.peekToken=null,this.firstCall=!0},IKRS.RegexTokenizer.prototype._setCurrentToken=function(e){return this.currentToken=this.peekToken,this.peekToken=e,this.currentToken},IKRS.RegexTokenizer.prototype.reachedEOI=function(){return null==this.currentToken},IKRS.RegexTokenizer.prototype.peek=function(){return this.peekToken},IKRS.RegexTokenizer.prototype.nextToken=function(){for(this.firstCall&&(this.firstCall=!1,this.nextToken());this._nextTokenWhitespaceAllowed(),!this.reachedEOI()&&this.currentToken.isWhitespace(););return this.currentToken},IKRS.RegexTokenizer.prototype._nextTokenWhitespaceAllowed=function(){var e=this.pushbackReader.read();if(-1==e)return this._setCurrentToken(null);if("\\"==e)return this._readEscaped(e);if("*"==e||"+"==e||"("==e||")"==e||"["==e||"]"==e||"|"==e||"{"==e||"}"==e||"?"==e)return this._setCurrentToken(new IKRS.RegexToken(e,e,!0,!1,!1,this.pushbackReader.position,this.pushbackReader.position+1));if("-"==e||"^"==e)return this._setCurrentToken(new IKRS.RegexToken(e,e,!0,!0,!1,this.pushbackReader.position,this.pushbackReader.position+1));if("-"==e||"$"==e)return this._setCurrentToken(new IKRS.RegexToken(e,e,!1,!0,!1,this.pushbackReader.position,this.pushbackReader.position+1));if("&"==e){var t=this.pushbackReader.read();return"&"==t?this._setCurrentToken(new IKRS.RegexToken("&&","&&",!0,!1,!1,this.pushbackReader.position-1,this.pushbackReader.position+1)):(-1!=t&&this.pushbackReader.unread(1),this._setCurrentToken(new IKRS.RegexToken(e,e,!1,!0,!1,this.pushbackReader.position,this.pushbackReader.position+1)))}return this._setCurrentToken(new IKRS.RegexToken(e,e,!1,!0,!1,this.pushbackReader.position,this.pushbackReader.position+1))},IKRS.RegexTokenizer.prototype._readEscaped=function(e){var t=this.pushbackReader.read();return-1==t&&this._throwParseException("EOI reached where escaped symbol is expected."),"\\"==t?this._setCurrentToken(new IKRS.RegexToken(t,e+t,!1,!0,!0,this.pushbackReader.position-1,this.pushbackReader.position+1)):"t"==t?this._setCurrentToken(new IKRS.RegexToken("\t",e+t,!1,!0,!0,this.pushbackReader.position-1,this.pushbackReader.position+1)):"n"==t?this._setCurrentToken(new IKRS.RegexToken("\n",e+t,!1,!0,!0,this.pushbackReader.position-1,this.pushbackReader.position+1)):"b"==t?this._setCurrentToken(new IKRS.RegexToken("\b",e+t,!1,!0,!0,this.pushbackReader.position-1,this.pushbackReader.position+1)):"f"==t?this._setCurrentToken(new IKRS.RegexToken("\f",e+t,!1,!0,!0,this.pushbackReader.position-1,this.pushbackReader.position+1)):"r"==t?this._setCurrentToken(new IKRS.RegexToken("\r",e+t,!1,!0,!0,this.pushbackReader.position-1,this.pushbackReader.position+1)):"f"==t?this._setCurrentToken(new IKRS.RegexToken("\f",e+t,!1,!0,!0,this.pushbackReader.position-1,this.pushbackReader.position+1)):"a"==t?this._setCurrentToken(new IKRS.RegexToken("a",e+t,!1,!0,!0,this.pushbackReader.position-1,this.pushbackReader.position+1)):"e"==t?this._setCurrentToken(new IKRS.RegexToken("e",e+t,!1,!0,!0,this.pushbackReader.position-1,this.pushbackReader.position+1)):"x"==t?this._readEscapedASCIIChar(e+t):"u"==t?this._readEscapedUnicodeChar(e+t):"0"==t?this._readEscapedOctalChar(e+t):this._setCurrentToken(new IKRS.RegexToken(t,e+t,!1,!0,!0,this.pushbackReader.position-1,this.pushbackReader.position+1))},IKRS.RegexTokenizer.prototype._readEscapedASCIIChar=function(e){this.pushbackReader.available()<2&&(this._setCurrentToken(null),this._throwParseException("ASCII character code expected. Found EOI."));var t=this.pushbackReader.read()+this.pushbackReader.read();IKRS.RegexToken.isHexadecimal(t)||this._throwParseException("Not a valid ASCII number: '"+t+"'");var r=parseInt(t,16),n=String.fromCharCode(r);return this._setCurrentToken(new IKRS.RegexToken(n,e+code,!1,!0,!0,this.pushbackReader.position-3,this.pushbackReader.position+1))},IKRS.RegexTokenizer.prototype._readEscapedUnicodeChar=function(e){this.pushbackReader.available()<4&&(this._setCurrentToken(null),this._throwParseException("Unicode character code expected. Found EOI."));var t=this.pushbackReader.read()+this.pushbackReader.read()+this.pushbackReader.read()+this.pushbackReader.read();IKRS.RegexToken.isHexadecimal(t)||this._throwParseException("Not a valid unicode number: '"+t+"'");var r=parseInt(t,16),n=String.fromCharCode(r);return this._setCurrentToken(new IKRS.RegexToken(n,e+t,!1,!0,!0,this.pushbackReader.position-5,this.pushbackReader.position+1))},IKRS.RegexTokenizer.prototype._readEscapedOctalChar=function(e){this.pushbackReader.available()<3&&(this._setCurrentToken(null),this._throwParseException("Octal character code expected. Found EOI."));var t=this.pushbackReader.read(),r=this.pushbackReader.read(),n=this.pushbackReader.read(),a=t+r+n;"0"!=t&&"1"!=t&&"2"!=t&&"3"!=t&&this._throwParseException("Not a valid octal number: '"+a+"'"),IKRS.RegexToken.isOctal(r)&&IKRS.RegexToken.isOctal(n)||this._throwParseException("Not a valid octal number: '"+a+"'");var i=parseInt(hexCode,8),o=String.fromCharCode(i);return this._setCurrentToken(new IKRS.RegexToken(o,e+code,!1,!0,!0,this.pushbackReader.position-4,this.pushbackReader.position+1))},IKRS.RegexTokenizer.prototype._throwParseException=function(e){throw new IKRS.ParseException(e,this.pushbackReader.position,this.pushbackReader.position+1)},IKRS.RegexTokenizer.prototype.constructor=IKRS.RegexParser,IKRS.RegexParser=function(e){IKRS.Object.call(this),this.tokenizer=e,this.warnings=[]},IKRS.RegexParser.prototype.parse=function(){return this.warnings=[],this.tokenizer.nextToken(),this.regex()},IKRS.RegexParser.prototype.regex=function(){var e=this.term();if(null!=this.tokenizer.currentToken&&this.tokenizer.currentToken.isUnionOperator()){this.tokenizer.nextToken();var t=this.regex();return new IKRS.RegexUnion(e,t)}return e},IKRS.RegexParser.prototype.term=function(){for(var e=null;null!=this.tokenizer.currentToken&&!this.tokenizer.currentToken.isClosingBracketOperator()&&!this.tokenizer.currentToken.isSetEndOperator()&&!this.tokenizer.currentToken.isUnionOperator();){var t=this.factor();e=null!=e?new IKRS.RegexConcatenation(e,t):t}return e},IKRS.RegexParser.prototype.factor=function(){for(var e=this.base();null!=this.tokenizer.currentToken&&this.tokenizer.currentToken.isQuantifyingOperator();)e=this._readQuantifyingRule(e),this.tokenizer.nextToken();return e},IKRS.RegexParser.prototype.base=function(){if(this.tokenizer.currentToken.isOpeningBracketOperator()){null==this.tokenizer.peek()||this.tokenizer.peek().isEscaped||"?"!=this.tokenizer.peek().value||this.warnings.push("Capturing expressions ('?') not implemented. Handling as character expression."),this.tokenizer.nextToken();var e=this.regex();return this.tokenizer.nextToken(),e}if(this.tokenizer.currentToken.isSetStartOperator()){var t=this._readCharacterSet(!1);return this.tokenizer.nextToken(),t}if(this.tokenizer.currentToken.isSpecialCharacter()){var r=IKRS.RegexSpecialCharacter.createFromToken(this.tokenizer.currentToken);return this.tokenizer.nextToken(),r}if(null!=this.tokenizer.peek()&&this.tokenizer.peek().isQuantifyingOperator())return e=this.tokenizer.currentToken.isSpecialCharacter()?IKRS.RegexSpecialCharacter.createFromToken(this.tokenizer.currentToken):new IKRS.RegexCharacter(this.tokenizer.currentToken),this.tokenizer.nextToken(),e;for(var n=new IKRS.TokenSequence,a=new IKRS.RegexConcatenation;!(null!=this.tokenizer.peek()&&this.tokenizer.peek().isQuantifyingOperator()||null==this.tokenizer.currentToken||this.tokenizer.currentToken.isOperator);)this.tokenizer.currentToken.isSpecialCharacter()?(1==n.tokens.length?a.addRegex(new IKRS.RegexCharacter(n.tokens[0])):1<n.tokens.length&&a.addRegex(new IKRS.RegexConstant(n)),n=new IKRS.TokenSequence,a.addRegex(IKRS.RegexSpecialCharacter.createFromToken(this.tokenizer.currentToken))):n.add(this.tokenizer.currentToken),this.tokenizer.nextToken();return 0<n.tokens.length&&a.addRegex(new IKRS.RegexConstant(n)),1==a.children.length?a.children[0]:a},IKRS.RegexParser.prototype._readQuantifyingRule=function(e){var t=0,r=Number.POSITIVE_INFINITY,n=0;if(this.tokenizer.currentToken.isSternOperator())r=Number.POSITIVE_INFINITY;else if(this.tokenizer.currentToken.isPlusOperator())t=1;else if(this.tokenizer.currentToken.isQuestionMarkOperator())t=0,r=1;else if(this.tokenizer.currentToken.isQuantifyingStartOperator()){this.__readAttributeList(e),0<e.attributes.length&&e.attributes[0].isInteger(!0)&&(n=1,(t=parseInt(e.attributes[0].value))<0&&this.warnings.push("minCount "+t+" is negative."),1<e.attributes.length?e.attributes[1].isInteger(!0)?(n=2,(r=parseInt(e.attributes[1].value))<t&&this.warnings.push("Maxcount "+r+" is smaller than minCount "+t+".")):r=Number.POSITIVE_INFINITY:r=t);for(var a=n;a<e.attributes.length;a++)e.attributes[a].isEmpty()?this.warnings.push("Quantifyer arrtibute at index "+a+" not supported."):this.warnings.push("Quantifyer arrtibute at index "+a+" not supported: '"+e.attributes[a].value+"'.")}else this._throwParseException("Unexpected operator at quantifyer start: '"+this.tokenizer.currentToken.value+"'.");return 1==t&&1==r?e:new IKRS.RegexQuantifyer(e,t,r)},IKRS.RegexParser.prototype._readCharacterSet=function(e){this.tokenizer.reachedEOI()&&this._throwParseException("Cannot read character set. Operator '[' expected, found instead: EOI."),this.tokenizer.currentToken.isSetStartOperator()||this._throwParseException("Cannot read character set. Operator '[' expected, found instead: '"+this.tokenizer.currentToken.value+"'.");var t=e,r=this.tokenizer.nextToken();null==r&&this._throwParseException("EOI reached but character set definition expected."),r.isExceptOperator()&&(t=!t,r=this.tokenizer.nextToken());for(var n=null,a=[],i=[],o=new IKRS.RegexUnion(null,null),s=null,h=!1;!(null!=s||h||null==(n=this.tokenizer.nextToken())||null!=r&&r.isSetEndOperator());){if(null==r);else if(r.isOperator)this._throwParseException("Operator '"+r.value+"' not allowed here.");else if(n.isRangeOperator()){var c=this.tokenizer.nextToken();if(null==c&&this._throwParseException("Unexpected EOI after range operator '"+n.value+"'."),c.isOperator&&this._throwParseException("Constant value expected after range operator '"+n.value+"'. Found instead '"+c.value+"' (operator)."),r.isSpecialCharacter())throw new IKRS.ParseException("Special character '"+r.value+"' not allowed in ranges.",r.inputStartOffset,r.inputEndOffset);if(n.isSpecialCharacter())throw new IKRS.ParseException("Special character '"+n.value+"' not allowed in ranges.",r.inputStartOffset,r.inputEndOffset);var u=new IKRS.RegexCharacterRange(t,r,c);i.push(u),o.children.push(u),n=this.tokenizer.nextToken()}else{r.isSpecialCharacter()&&this._throwParseException("Special character '"+r.value+"' not allowed in ranges.");new IKRS.RegexCharacter(r);a.push(r)}n.isAndOperator()&&(this.tokenizer.nextToken(),s=this._readCharacterSet(t),n=this.tokenizer.currentToken),n.isSetEndOperator()&&(h=!0),r=n,0}if(0!=a.length){var R=new IKRS.RegexCharacterSet(t,a);o.children.push(R)}0==o.children.length&&this._throwParseException("Empty character set not allowed.");var p=null;return p=1==o.children.length?o.children[0]:o,null!=s&&(p=new IKRS.RegexIntersection(p,s)),null==r&&this._throwParseException("EOI reached where end-of-set ']' is expected."),r.isSetEndOperator()||this._throwParseException("Unexpected token '"+r.value+"' reached, where end-of-set ']' is expected."),p},IKRS.RegexParser.prototype._readUnion=function(){null==this.tokenizer.nextToken()&&this._throwParseException("Unexpected EOI after union operator '|'.");var e=this.currentRegex,t=this._read(),r=new IKRS.RegexUnion(e,t);return this.currentRegex=r},IKRS.RegexParser.prototype._readConstant=function(e){var t=new IKRS.TokenSequence;for(t.add(this.tokenizer.currentToken);null!=this.tokenizer.nextToken()&&this.tokenizer.currentToken.isConstant&&(e||"-"!=this.tokenizer.currentToken.value)&&!this.tokenizer.currentToken.isSpecialCharacter();)t.add(this.tokenizer.currentToken);for(this.currentRegex=new IKRS.RegexConstant(t);!this.tokenizer.reachedEOI()&&this.tokenizer.currentToken.isQuantifyingOperator();)this._read();return this.currentRegex},IKRS.RegexParser.prototype.__readAttributeList=function(e){for(var t=new IKRS.StringBuffer,r=null,n=!1;null!=(r=this.tokenizer.nextToken())&&!r.isQuantifyingEndOperator();)r.isQuantifyingStartOperator()&&this._throwParseException("Could not read quantifyer/attribute list. Unexpected '{' operator."),","==r.value?(e.attributes.push(new IKRS.RegexAttribute(t.toString().replace(/^\s+|\s+$/g,""))),t=new IKRS.StringBuffer,n=!0):(t.append(r.value),n=!1);(0<t.length||n)&&e.attributes.push(new IKRS.RegexAttribute(t.toString().replace(/^\s+|\s+$/g,""))),this.tokenizer.reachedEOI()&&this._throwParseException("EOI reached when reading quantifyer/attribute list. Missing end-of-attributes '}' operator."),this.tokenizer.currentToken.isQuantifyingEndOperator()||this._throwParseException("Could not read quantifyer/attribute list. Missing end-of-attributes '}' operator.")},IKRS.RegexParser.prototype._throwParseException=function(e){throw new IKRS.ParseException(e,this.tokenizer.pushbackReader.position,this.tokenizer.pushbackReader.position+1)},IKRS.RegexParser.prototype.constructor=IKRS.RegexParser,IKRS.TokenSequence=function(){IKRS.Object.call(this),this.tokens=[]},IKRS.TokenSequence.prototype.add=function(e){this.tokens.push(e)},IKRS.TokenSequence.prototype.toString=function(){for(var e=new IKRS.StringBuffer,t=0;t<this.tokens.length;t++)this.tokens[t].isEscaped?e.append(this.tokens[t].rawValue):e.append(this.tokens[t].value);return e.toString()},IKRS.TokenSequence.prototype.constructor=IKRS.TokenSequence,IKRS.ParseException=function(e,t,r){IKRS.Object.call(this),this.errorMessage=e,this.startOffset=t,this.endOffset=r},IKRS.ParseException.prototype.constructor=IKRS.ParseException,IKRS.MatchResult=function(e,t,r,n){IKRS.Object.call(this),this.matchStatus=e,this.matchLength=t,this.beginMark=r,this.endMark=n},IKRS.MatchResult.STATUS_COMPLETE=0,IKRS.MatchResult.STATUS_FAIL=1,IKRS.MatchResult.status2name=function(e){switch(e){case IKRS.MatchResult.STATUS_COMPLETE:return"COMPLETE";case IKRS.MatchResult.STATUS_FAIL:return"FAIL";default:return"UNKNOWN("+e+")"}},IKRS.MatchResult.prototype.toString=function(){return"[IKRS.MatchResult]={ matchStatus="+IKRS.MatchResult.status2name(this.matchStatus)+", matchLength="+this.matchLength+", matchBeginPosition="+this.beginMark.position+", matchEndPosition="+this.endMark.position+" }"},IKRS.MatchResult.prototype.constructor=IKRS.MatchResult,IKRS.Analyzer=function(){IKRS.Object.call(this),this.rules=[]},IKRS.Analyzer.prototype.addRule=function(e,t,r,n){if("string"==typeof t){var a=new IKRS.RegexParser(new IKRS.RegexTokenizer(new IKRS.PushbackStringReader(t))).parse();if(null==a)throw"Cannot add empty regex expressions to the analyzer's rule list.";return this._addRule(e,a,r,n),!0}if("object"!=typeof t||"function"!=typeof t.match)throw"Cannot add a non-string/non-regexp to this analyzer.";this._addRule(e,t,r,n)},IKRS.Analyzer.prototype._addRule=function(e,t,r,n){return this.rules.push({name:e,regex:t,action:r,callbackParams:n}),!0},IKRS.Analyzer.prototype.nextMatch=function(e,t){for(var r=e.getMark(),n=[],a=0,i=0;i<this.rules.length&&(!t||0==a);i++){e.resetTo(r);var o=this.rules[i].regex.match(e),s=IKRS.Analyzer._getLongestMatch(o,!1);n.push(s),null!=s&&a++}var h=IKRS.Analyzer._locateLongestMatch(n,!0);if(-1!=h&&null!=this.rules[h].action){s=n[h];var c=e.extractFromString(s.beginMark,s.endMark);return e.resetTo(s.endMark),this.rules[h].action(this.rules[h].name,c,s,this.rules[h].callbackParams),s}return null},IKRS.Analyzer._getLongestMatch=function(e,t){var r=IKRS.Analyzer._locateLongestMatch(e,t);return-1==r?null:e[r]},IKRS.Analyzer._locateLongestMatch=function(e,t){for(var r=-1,n=-1,a=0;a<e.length;a++)null!=e[a]&&e[a].matchStatus==IKRS.MatchResult.STATUS_COMPLETE&&(t||e[a].matchLength>n)&&(n=e[r=a].matchLength);return r},IKRS.Analyzer.prototype.constructor=IKRS.Analyzer,IKRS.RegexConstant=function(e){IKRS.Pattern.call(this,"CONSTANT["+e.toString()+"]"),this.tokenSequence=e},IKRS.RegexConstant.prototype.match=function(e){for(var t=e.getMark(),r=0;r<this.tokenSequence.tokens.length;r++){var n=this.tokenSequence.tokens[r],a=e.read();if(-1==a)return[new IKRS.MatchResult(IKRS.MatchResult.STATUS_FAIL,r,t,e.getMark())];if(a!=n.value)return[new IKRS.MatchResult(IKRS.MatchResult.STATUS_FAIL,r,t,e.getMark())]}return[new IKRS.MatchResult(IKRS.MatchResult.STATUS_COMPLETE,this.tokenSequence.tokens.length,t,e.getMark())]},IKRS.RegexConstant.prototype.toString=function(){return this.tokenSequence.toString()},IKRS.RegexConstant.prototype.constructor=IKRS.RegexConstant,IKRS.RegexConstant.prototype.getName=IKRS.Pattern.prototype.getName,IKRS.RegexConstant.prototype.getValue=IKRS.Pattern.prototype.getValue,IKRS.RegexConstant.prototype.getChildren=IKRS.Pattern.prototype.getChildren,IKRS.RegexConstant.prototype.getAttributes=IKRS.Pattern.prototype.getAttributes,IKRS.RegexUnion=function(e,t){IKRS.Pattern.call(this,"UNION"),null!=e&&this.children.push(e),null!=t&&this.children.push(t)},IKRS.RegexUnion.prototype.match=function(e){for(var t=e.getMark(),r=[],n=0;n<this.children.length;n++){e.resetTo(t);for(var a=this.children[n].match(e),i=0;i<a.length;i++)a[i].matchStatus==IKRS.MatchResult.STATUS_COMPLETE&&r.push(a[i])}return r},IKRS.RegexUnion.prototype.toString=function(){for(var e="(",t=0;t<this.children.length;t++)0<t&&(e+="|"),e+=this.children[t].toString();return e+=")"},IKRS.RegexUnion.prototype.constructor=IKRS.RegexUnion,IKRS.RegexUnion.prototype.getName=IKRS.Pattern.prototype.getName,IKRS.RegexUnion.prototype.getValue=IKRS.Pattern.prototype.getValue,IKRS.RegexUnion.prototype.getChildren=IKRS.Pattern.prototype.getChildren,IKRS.RegexUnion.prototype.getAttributes=IKRS.Pattern.prototype.getAttributes,IKRS.RegexIntersection=function(e,t){IKRS.Pattern.call(this,"INTERSECTION"),null!=e&&this.children.push(e),null!=t&&this.children.push(t)},IKRS.RegexIntersection.prototype.match=function(e){var t=e.getMark();if(0==this.children.length)return[];var r=this.children[0].match(e);if(0==r.length)return[];for(var n=1;n<this.children.length;n++){var a=[];e.resetTo(t);for(var i=this.children[n].match(e),o=0;o<r.length;o++)if(r[o].matchStatus==IKRS.MatchResult.STATUS_COMPLETE)for(var s=0;s<i.length;s++)i[s].matchStatus==IKRS.MatchResult.STATUS_COMPLETE&&r[o].matchLength==i[s].matchLength&&a.push(r[o]);r=a}return r},IKRS.RegexIntersection.prototype.toString=function(){for(var e="(",t=0;t<this.children.length;t++)0<t&&(e+="&&"),e+=this.children[t];return e+=")"},IKRS.RegexIntersection.prototype.constructor=IKRS.RegexIntersection,IKRS.RegexIntersection.prototype.getName=IKRS.Pattern.prototype.getName,IKRS.RegexIntersection.prototype.getValue=IKRS.Pattern.prototype.getValue,IKRS.RegexIntersection.prototype.getChildren=IKRS.Pattern.prototype.getChildren,IKRS.RegexIntersection.prototype.getAttributes=IKRS.Pattern.prototype.getAttributes,IKRS.RegexQuantifyer=function(e,t,r){IKRS.Pattern.call(this,"QUANTIFYER{"+t+","+r+"}"),this.baseRegex=e,this.minCount=t,this.maxCount=r,this.children.push(e)},IKRS.RegexQuantifyer.prototype.match=function(e){var t=e.getMark(),r=0,n=new IKRS.ArraySet([],{equal:function(e,t){return e.matchStatus==t.matchStatus&&e.beginMark.position&&t.beginMark.position&&e.matchLength==t.matchLength}}),a=this.baseRegex.match(e);for(0==this.minCount&&n.addUnique(new IKRS.MatchResult(IKRS.MatchResult.STATUS_COMPLETE,0,t,t));r<a.length;){if(a[r].matchStatus==IKRS.MatchResult.STATUS_COMPLETE){if(r+1>=this.minCount&&r+1<=this.maxCount&&n.addUnique(new IKRS.MatchResult(IKRS.MatchResult.STATUS_COMPLETE,a[r].endMark.position-t.position,t,a[r].endMark)),!e.resetTo(a[r].endMark))throw"[IKRS.RegexQuantifyer.match(...)] Failed to set read position to "+a[r].endMark.position+".";for(var i=this.baseRegex.match(e),o=0;o<i.length;o++)i[o].matchStatus==IKRS.MatchResult.STATUS_COMPLETE&&0<i[o].matchLength&&a.push(i[o])}r++}return n.elements},IKRS.RegexQuantifyer.prototype.toString=function(){return this.maxCount==Number.POSITIVE_INFINITY?0==this.minCount?"("+this.baseRegex.toString()+"*)":1==this.minCount?"("+this.baseRegex.toString()+"+)":"("+this.baseRegex.toString()+"{"+this.minCount+",})":this.maxCount==this.minCount?"("+this.baseRegex.toString()+"{"+this.minCount+"})":"("+this.baseRegex.toString()+"{"+this.minCount+","+this.maxCount+"})"},IKRS.RegexQuantifyer.prototype.constructor=IKRS.RegexQuantifyer,IKRS.RegexQuantifyer.prototype.getName=IKRS.Pattern.prototype.getName,IKRS.RegexQuantifyer.prototype.getValue=IKRS.Pattern.prototype.getValue,IKRS.RegexQuantifyer.prototype.getChildren=IKRS.Pattern.prototype.getChildren,IKRS.RegexQuantifyer.prototype.getAttributes=IKRS.Pattern.prototype.getAttributes,IKRS.RegexConcatenation=function(e,t){IKRS.Pattern.call(this,"CONCATENATION"),null!=e&&this.children.push(e),null!=t&&this.children.push(t)},IKRS.RegexConcatenation.prototype.match=function(e){var t=e.getMark();if(0==this.children.length)return[];for(var r=[],n=this.children[0].match(e),a=1;a<this.children.length;a++)n=r=this._matchRight(e,t,n,a);return r},IKRS.RegexConcatenation.prototype._matchRight=function(e,t,r,n){for(var a=[],i=0;i<r.length;i++)if(r[i].matchStatus==IKRS.MatchResult.STATUS_COMPLETE){e.resetTo(r[i].endMark);for(var o=this.children[n].match(e),s=0;s<o.length;s++)o[s].matchStatus==IKRS.MatchResult.STATUS_COMPLETE&&a.push(new IKRS.MatchResult(IKRS.MatchResult.STATUS_COMPLETE,o[s].endMark.position-t.position,t,o[s].endMark))}return a},IKRS.RegexConcatenation.prototype.toString=function(){var e=new IKRS.StringBuffer;e.append("(");for(var t=0;t<this.children.length;t++)e.append(this.children[t].toString());return e.append(")"),e.toString()},IKRS.RegexConcatenation.prototype.addRegex=function(e){this.children.push(e)},IKRS.RegexConcatenation.prototype.constructor=IKRS.RegexConcatenation,IKRS.RegexConcatenation.prototype.getName=IKRS.Pattern.prototype.getName,IKRS.RegexConcatenation.prototype.getValue=IKRS.Pattern.prototype.getValue,IKRS.RegexConcatenation.prototype.getChildren=IKRS.Pattern.prototype.getChildren,IKRS.RegexConcatenation.prototype.getAttributes=IKRS.Pattern.prototype.getAttributes,IKRS.RegexCharacter=function(e){IKRS.Pattern.call(this,"CHARACTER["+e.value+"]"),this.token=e},IKRS.RegexCharacter.prototype.match=function(e){var t=e.getMark(),r=e.read();return-1==r?[new IKRS.MatchResult(IKRS.MatchResult.STATUS_FAIL,0,t,e.getMark())]:r!=this.token.value?[new IKRS.MatchResult(IKRS.MatchResult.STATUS_FAIL,0,t,e.getMark())]:[new IKRS.MatchResult(IKRS.MatchResult.STATUS_COMPLETE,1,t,e.getMark())]},IKRS.RegexCharacter.prototype.toString=function(){return this.token.isEscaped?this.token.rawValue:this.token.value},IKRS.RegexCharacter.prototype.constructor=IKRS.RegexCharacter,IKRS.RegexCharacter.prototype.getName=IKRS.Pattern.prototype.getName,IKRS.RegexCharacter.prototype.getValue=IKRS.Pattern.prototype.getValue,IKRS.RegexCharacter.prototype.getChildren=IKRS.Pattern.prototype.getChildren,IKRS.RegexCharacter.prototype.getAttributes=IKRS.Pattern.prototype.getAttributes,IKRS.RegexCharacterSet=function(e,t){IKRS.Pattern.call(this,"SET[...]"),this.negate=e,this.characters=null!=t?t:[]},IKRS.RegexCharacterSet.prototype.addCharacter=function(e){this.characters.push(e)},IKRS.RegexCharacterSet.prototype.match=function(e){var t=e.getMark(),r=e.read();if(-1==r)return[new IKRS.MatchResult(IKRS.MatchResult.STATUS_FAIL,0,t,e.getMark())];if(this.negate){for(var n=0;n<this.characters.length;n++){if(this.characters[n].value==r)return[new IKRS.MatchResult(IKRS.MatchResult.STATUS_FAIL,0,t,e.getMark())]}return[new IKRS.MatchResult(IKRS.MatchResult.STATUS_COMPLETE,1,t,e.getMark())]}for(n=0;n<this.characters.length;n++){if(this.characters[n].value==r)return[new IKRS.MatchResult(IKRS.MatchResult.STATUS_COMPLETE,1,t,e.getMark())]}return[new IKRS.MatchResult(IKRS.MatchResult.STATUS_FAIL,0,t,e.getMark())]},IKRS.RegexCharacterSet.prototype.toString=function(){var e="[";this.negate&&(e+="^");for(var t=0;t<this.characters.length;t++)this.characters[t].isEscaped?e+=this.characters[t].rawValue:e+=this.characters[t].value;return e+="]"},IKRS.RegexCharacterSet.prototype.getName=function(){var e="SET[";this.negate&&(e+="NOT ");for(var t=0;t<this.characters.length;t++)0<t&&(e+=" "),this.characters[t].isEscaped?e+=this.characters[t].rawValue:e+=this.characters[t].value;return e+="]"},IKRS.RegexCharacterSet.prototype.constructor=IKRS.RegexCharacterSet,IKRS.RegexCharacterSet.prototype.getValue=IKRS.Pattern.prototype.getValue,IKRS.RegexCharacterSet.prototype.getChildren=IKRS.Pattern.prototype.getChildren,IKRS.RegexCharacterSet.prototype.getAttributes=IKRS.Pattern.prototype.getAttributes,IKRS.RegexCharacterRange=function(e,t,r){IKRS.Pattern.call(this,"RANGE["+(e?"NOT ":"")+t.value+"-"+r.value+"]"),this.negate=e,this.startSymbol=t,this.endSymbol=r},IKRS.RegexCharacterRange.prototype.match=function(e){var t=e.getMark(),r=e.read();if(-1==r)return[new IKRS.MatchResult(IKRS.MatchResult.STATUS_FAIL,0,t,e.getMark())];var n=r.charCodeAt(0),a=this.startSymbol.getCharacterCode()<=n&&n<=this.endSymbol.getCharacterCode();return this.negate&&!a||!this.negate&&a?[new IKRS.MatchResult(IKRS.MatchResult.STATUS_COMPLETE,1,t,e.getMark())]:[new IKRS.MatchResult(IKRS.MatchResult.STATUS_FAIL,0,t,e.getMark())]},IKRS.RegexCharacterRange.prototype.toString=function(){var e="[";return this.negate&&(e+="^"),e+=this.startSymbol.value+"-"+this.endSymbol.value,e+="]"},IKRS.RegexCharacterRange.prototype.constructor=IKRS.RegexCharacterRange,IKRS.RegexCharacterRange.prototype.getName=IKRS.Pattern.prototype.getName,IKRS.RegexCharacterRange.prototype.getValue=IKRS.Pattern.prototype.getValue,IKRS.RegexCharacterRange.prototype.getChildren=IKRS.Pattern.prototype.getChildren,IKRS.RegexCharacterRange.prototype.getAttributes=IKRS.Pattern.prototype.getAttributes,IKRS.RegexSpecialCharacter=function(e,t){IKRS.Pattern.call(this,null==t?"SPECIAL["+e.rawValue+"]":t),this.token=e},IKRS.RegexSpecialCharacter.prototype.match=function(e){throw"[IKRS.RegexSpecialCharacter.match(...)] This class is abstract and the 'match' function must be overridden by its subclasses before it can be used."},IKRS.RegexSpecialCharacter.prototype.toString=function(){return this.token.isEscaped?this.token.rawValue:this.token.value},IKRS.RegexSpecialCharacter.createFromToken=function(e){if(!e.isSpecialCharacter())throw"[IKRS.RegexSpecialCharacter.createFromToken(...){static}] Cannot create RegExp from token '"+e.rawValue+"'. It seems not to be a special character. Does your parser work correctly?";if(e.isBeginOfInputCharacter())return new IKRS.RegexBeginOfInput(e);if(e.isEndOfInputCharacter())return new IKRS.RegexEndOfInput(e);if(e.isWildcardCharacter())return new IKRS.RegexWildcard(e);if(e.isDigitClassCharacter())return new IKRS.RegexDigit(e,!1);if(e.isNonDigitClassCharacter())return new IKRS.RegexDigit(e,!0);if(e.isWhitespaceClassCharacter())return new IKRS.RegexWhitespace(e,!1);if(e.isNonWhitespaceClassCharacter())return new IKRS.RegexWhitespace(e,!0);if(e.isWordClassCharacter())return new IKRS.RegexWord(e,!1);if(e.isNonWordClassCharacter())return new IKRS.RegexWord(e,!0);throw"[IKRS.RegexSpecialCharacter.createFromToken(...){static}] Cannot create RegExp from token '"+e.rawValue+"'. It is a special character but does not match any expected case. Does your parser work correctly?"},IKRS.RegexSpecialCharacter.prototype.constructor=IKRS.RegexSpecialCharacter,IKRS.RegexSpecialCharacter.prototype.getName=IKRS.Pattern.prototype.getName,IKRS.RegexSpecialCharacter.prototype.getValue=IKRS.Pattern.prototype.getValue,IKRS.RegexSpecialCharacter.prototype.getChildren=IKRS.Pattern.prototype.getChildren,IKRS.RegexSpecialCharacter.prototype.getAttributes=IKRS.Pattern.prototype.getAttributes,IKRS.RegexWhitespace=function(e,t){IKRS.RegexSpecialCharacter.call(this,e,t?"NON-WHITESPACE[\\S]":"WHITESPACE[\\s]"),this.negate=t},IKRS.RegexWhitespace.prototype.match=function(e){var t=e.getMark();if(e.reachedEOI()||0==e.available())return[new IKRS.MatchResult(IKRS.MatchResult.STATUS_FAIL,0,t,e.getMark())];var r=new String(""+e.read()),n=" "==r||"\n"==r||11==r.charCodeAt(0)||"\t"==r||"\f"==r;return this.negate&&n||!this.negate&&!n?[new IKRS.MatchResult(IKRS.MatchResult.STATUS_FAIL,0,t,e.getMark())]:[new IKRS.MatchResult(IKRS.MatchResult.STATUS_COMPLETE,1,t,e.getMark())]},IKRS.RegexWhitespace.prototype.constructor=IKRS.RegexWhitespace,IKRS.RegexWhitespace.prototype.getName=IKRS.RegexSpecialCharacter.prototype.getName,IKRS.RegexWhitespace.prototype.getValue=IKRS.RegexSpecialCharacter.prototype.getValue,IKRS.RegexWhitespace.prototype.getChildren=IKRS.RegexSpecialCharacter.prototype.getChildren,IKRS.RegexWhitespace.prototype.getAttributes=IKRS.RegexSpecialCharacter.prototype.getAttributes,IKRS.RegexWhitespace.prototype.toString=IKRS.RegexSpecialCharacter.prototype.toString,IKRS.RegexDigit=function(e,t){IKRS.RegexSpecialCharacter.call(this,e,t?"NON-DIGIT[\\D]":"DIGIT[\\s]"),this.negate=t},IKRS.RegexDigit.prototype.match=function(e){var t=e.getMark();if(e.reachedEOI()||0==e.available())return[new IKRS.MatchResult(IKRS.MatchResult.STATUS_FAIL,0,t,e.getMark())];var r=new String(""+e.read()),n=48<=r.charCodeAt(0)&&r.charCodeAt(0)<=57;return this.negate&&n||!this.negate&&!n?[new IKRS.MatchResult(IKRS.MatchResult.STATUS_FAIL,0,t,e.getMark())]:[new IKRS.MatchResult(IKRS.MatchResult.STATUS_COMPLETE,1,t,e.getMark())]},IKRS.RegexDigit.prototype.constructor=IKRS.RegexDigit,IKRS.RegexDigit.prototype.getName=IKRS.RegexSpecialCharacter.prototype.getName,IKRS.RegexDigit.prototype.getValue=IKRS.RegexSpecialCharacter.prototype.getValue,IKRS.RegexDigit.prototype.getChildren=IKRS.RegexSpecialCharacter.prototype.getChildren,IKRS.RegexDigit.prototype.getAttributes=IKRS.RegexSpecialCharacter.prototype.getAttributes,IKRS.RegexDigit.prototype.toString=IKRS.RegexSpecialCharacter.prototype.toString,IKRS.RegexWord=function(e,t){IKRS.RegexSpecialCharacter.call(this,e,t?"NON-WORD[\\W]":"WORD[\\w]"),this.negate=t},IKRS.RegexWord.prototype.match=function(e){var t=e.getMark();if(e.reachedEOI()||0==e.available())return[new IKRS.MatchResult(IKRS.MatchResult.STATUS_FAIL,0,t,e.getMark())];var r=new String(""+e.read()),n=48<=r.charCodeAt(0)&&r.charCodeAt(0)<=57||97<=r.charCodeAt(0)&&r.charCodeAt(0)<=122||65<=r.charCodeAt(0)&&r.charCodeAt(0)<=90||"_"==r;return this.negate&&n||!this.negate&&!n?[new IKRS.MatchResult(IKRS.MatchResult.STATUS_FAIL,0,t,e.getMark())]:[new IKRS.MatchResult(IKRS.MatchResult.STATUS_COMPLETE,1,t,e.getMark())]},IKRS.RegexWord.prototype.constructor=IKRS.RegexWord,IKRS.RegexWord.prototype.getName=IKRS.RegexSpecialCharacter.prototype.getName,IKRS.RegexWord.prototype.getValue=IKRS.RegexSpecialCharacter.prototype.getValue,IKRS.RegexWord.prototype.getChildren=IKRS.RegexSpecialCharacter.prototype.getChildren,IKRS.RegexWord.prototype.getAttributes=IKRS.RegexSpecialCharacter.prototype.getAttributes,IKRS.RegexWord.prototype.toString=IKRS.RegexSpecialCharacter.prototype.toString,IKRS.RegexBeginOfInput=function(e){IKRS.RegexSpecialCharacter.call(this,e,"BEGIN-OF-INPUT[^]")},IKRS.RegexBeginOfInput.prototype.match=function(e){var t=e.getMark(),r=null;return r=e.atBeginOfInput()?IKRS.MatchResult.STATUS_COMPLETE:IKRS.MatchResult.STATUS_FAIL,[new IKRS.MatchResult(r,0,t,t)]},IKRS.RegexBeginOfInput.prototype.constructor=IKRS.RegexBeginOfInput,IKRS.RegexBeginOfInput.prototype.getName=IKRS.RegexSpecialCharacter.prototype.getName,IKRS.RegexBeginOfInput.prototype.getValue=IKRS.RegexSpecialCharacter.prototype.getValue,IKRS.RegexBeginOfInput.prototype.getChildren=IKRS.RegexSpecialCharacter.prototype.getChildren,IKRS.RegexBeginOfInput.prototype.getAttributes=IKRS.RegexSpecialCharacter.prototype.getAttributes,IKRS.RegexBeginOfInput.prototype.toString=IKRS.RegexSpecialCharacter.prototype.toString,IKRS.RegexEndOfInput=function(e){IKRS.RegexSpecialCharacter.call(this,e,"END-OF-INPUT[^]")},IKRS.RegexEndOfInput.prototype.match=function(e){var t=e.getMark(),r=null;return r=e.reachedEOI()||0==e.available()?IKRS.MatchResult.STATUS_COMPLETE:IKRS.MatchResult.STATUS_FAIL,[new IKRS.MatchResult(r,0,t,t)]},IKRS.RegexEndOfInput.prototype.constructor=IKRS.RegexEndOfInput,IKRS.RegexEndOfInput.prototype.getName=IKRS.RegexSpecialCharacter.prototype.getName,IKRS.RegexEndOfInput.prototype.getValue=IKRS.RegexSpecialCharacter.prototype.getValue,IKRS.RegexEndOfInput.prototype.getChildren=IKRS.RegexSpecialCharacter.prototype.getChildren,IKRS.RegexEndOfInput.prototype.getAttributes=IKRS.RegexSpecialCharacter.prototype.getAttributes,IKRS.RegexEndOfInput.prototype.toString=IKRS.RegexSpecialCharacter.prototype.toString,IKRS.RegexWildcard=function(e){IKRS.RegexSpecialCharacter.call(this,e,"WILDCARD[.]")},IKRS.RegexWildcard.prototype.match=function(e){var t=e.getMark();return e.reachedEOI()||0==e.available()?[new IKRS.MatchResult(IKRS.MatchResult.STATUS_FAIL,0,t,e.getMark())]:(e.read(),[new IKRS.MatchResult(IKRS.MatchResult.STATUS_COMPLETE,1,t,e.getMark())])},IKRS.RegexWildcard.prototype.constructor=IKRS.RegexWildcard,IKRS.RegexWildcard.prototype.getName=IKRS.RegexSpecialCharacter.prototype.getName,IKRS.RegexWildcard.prototype.getValue=IKRS.RegexSpecialCharacter.prototype.getValue,IKRS.RegexWildcard.prototype.getChildren=IKRS.RegexSpecialCharacter.prototype.getChildren,IKRS.RegexWildcard.prototype.getAttributes=IKRS.RegexSpecialCharacter.prototype.getAttributes,IKRS.RegexWildcard.prototype.toString=IKRS.RegexSpecialCharacter.prototype.toString;